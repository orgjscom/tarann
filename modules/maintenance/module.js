module.exports=function(e){var t=e.get("express").Router(),n=require("path"),i=new(require("i18n-2"))({locales:e.get("config").locales.avail,directory:n.join(__dirname,"lang"),extension:".js",devMode:e.get("config").locales.dev_mode}),r=e.get("renderer");return t.get("/",function(t,s){if(i.setLocale(t.session.current_locale),e.get("settings")&&e.get("settings").site_mode&&"maintenance"!=e.get("settings").site_mode)return s.redirect(303,"/?rnd="+Math.random().toString().replace(".",""));var o=r.render_file(n.join(__dirname,"views"),"maint",{lang:i,title:i.__("module_name"),site_title:e.get("settings").site_title||"TaracotJS",keywords:"",description:""},t);s.send(o)}),t};