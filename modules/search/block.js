var gaikan=require("gaikan");module.exports=function(e){var i=(e.get("config").locales.avail,require("path")),o=new(require("i18n-2"))({locales:e.get("config").locales.avail,directory:i.join(__dirname,"lang"),extension:".js",devMode:e.get("config").locales.dev_mode}),a=require("fs"),n=gaikan.compileFromFile(a.existsSync(i.join(__dirname,"views")+"/custom_search_block_top.html")?i.join(__dirname,"views")+"/custom_search_block_top.html":i.join(__dirname,"views")+"/search_block_top.html"),l=gaikan.compileFromFile(a.existsSync(i.join(__dirname,"views")+"/custom_search_block_li.html")?i.join(__dirname,"views")+"/custom_search_block_li.html":i.join(__dirname,"views")+"/search_block_li.html"),r={data:function(e,i,a){o.setLocale(e.session.current_locale);var r=(e.session.current_locale,{top:n(gaikan,{lang:o,search_query:e.query.query||""},void 0),li:l(gaikan,{lang:o},void 0)});a(r)}};return r};